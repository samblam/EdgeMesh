# Kubernetes Secrets for EdgeMesh
#
# IMPORTANT: This is an example file. DO NOT commit actual secrets to git!
#
# Usage:
#   1. Copy this file: cp secrets.yaml.example secrets.yaml
#   2. Replace all CHANGE_ME values with secure random strings
#   3. Apply: kubectl apply -f secrets.yaml
#   4. Add secrets.yaml to .gitignore

apiVersion: v1
kind: Secret
metadata:
  name: edgemesh-secrets
  namespace: edgemesh
type: Opaque
stringData:
  # PostgreSQL connection string
  # Format: postgresql://user:password@host:port/database
  database-url: "postgresql+asyncpg://postgres:CHANGE_ME_STRONG_PASSWORD@postgres:5432/edgemesh"

  # PostgreSQL password (should match the one in database-url)
  postgres-password: "CHANGE_ME_STRONG_PASSWORD"

  # Enrollment token secret (256-bit random string recommended)
  # Generate with: openssl rand -hex 32
  enrollment-token-secret: "CHANGE_ME_LONG_RANDOM_STRING_USE_OPENSSL_RAND"

  # Grafana admin password
  grafana-admin-password: "CHANGE_ME_GRAFANA_PASSWORD"

---
# Example of using external secrets (recommended for production)
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: edgemesh-secrets
#   namespace: edgemesh
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: edgemesh-secrets
#     creationPolicy: Owner
#   data:
#   - secretKey: database-url
#     remoteRef:
#       key: edgemesh/database-url
#   - secretKey: postgres-password
#     remoteRef:
#       key: edgemesh/postgres-password
#   - secretKey: enrollment-token-secret
#     remoteRef:
#       key: edgemesh/enrollment-token-secret
#   - secretKey: grafana-admin-password
#     remoteRef:
#       key: edgemesh/grafana-admin-password
